# 数据库初步设计

## 用户表 user
| 字段名 (Field)   | 数据类型 (Type)    | 约束/描述 (Constraint/Description)               |
|------------------|--------------------|------------------------------------------------|
| user_id          | INT                | 主键 (PK)，自动递增，用户唯一标识                  |
| role_id          | INT                | 外键 (FK)，关联 Role 表，定义用户角色             |
| username         | VARCHAR(50)        | 登录账号 (学号/工号)                           |
| password_hash    | VARCHAR(255)       | 存储加密后的密码                               |
| full_name        | VARCHAR(100)       | 姓名                                           |
| email            | VARCHAR(100)       | 邮箱                                           |
| phone_number     | VARCHAR(20)        | 电话                                           |
| supervisor_id    | INT                | 外键 (FK)，关联 User 表 (自关联)，仅研究生需要，存储导师 ID |


## 角色表 role
| 字段名 (Field)   | 数据类型 (Type)    | 约束/描述 (Constraint/Description)                    |
|------------------|--------------------|-----------------------------------------------------|
| role_id          | INT                | 主键 (PK)，角色唯一标识                               |
| role_name        | VARCHAR(50)        | 角色名称：'Graduate Student', 'Faculty', 'Admin'    |

## 考勤记录表 attendance_record
| 字段名 (Field)   | 数据类型 (Type)    | 约束/描述 (Constraint/Description)                        |
|------------------|--------------------|--------------------------------------------------------|
| attendance_id    | BIGINT             | 主键 (PK)，自动递增                                       |
| user_id          | INT                | 外键 (FK)，关联 User 表 (研究生)                          |
| check_in_time    | DATETIME           | 签到时间                                                |
| check_out_time   | DATETIME           | 签退时间 (可为空，表示未签退)                             |
| ip_address       | VARCHAR(40)        | 签到/退时的 IP 地址 (可选)                              |
| status           | ENUM               | 考勤状态：'Present', 'Late', 'Absent', 'Excused'         |

## 请假申请表 leave_appli
| 字段名 (Field)   | 数据类型 (Type)    | 约束/描述 (Constraint/Description)                        |
|------------------|--------------------|--------------------------------------------------------|
| leave_id         | BIGINT             | 主键 (PK)，自动递增                                       |
| user_id          | INT                | 外键 (FK)，关联 User 表 (申请人/研究生)                   |
| start_date       | DATE               | 请假开始日期                                             |
| end_date         | DATE               | 请假结束日期                                             |
| reason           | TEXT               | 请假理由                                                 |
| applied_at       | DATETIME           | 申请时间                                                 |
| approver_id      | INT                | 外键 (FK)，关联 User 表 (审批人/导师)                    |
| approval_status  | ENUM               | 审批状态：'Pending', 'Approved', 'Rejected'              |
| approval_time    | DATETIME           | 审批时间 (可为空)                                        |

## 实验室房间表 lab_room
| 字段名 (Field)   | 数据类型 (Type)    | 约束/描述 (Constraint/Description)                        |
|------------------|--------------------|--------------------------------------------------------|
| lab_id           | INT                | 主键 (PK)，实验室唯一标识                               |
| lab_name         | VARCHAR(100)       | 实验室名称/编号                                         |
| location         | VARCHAR(255)       | 所在楼层或位置                                          |
| capacity         | INT                | 最大容纳人数或设备数量                                 |


## 预约记录表 book_record
| 字段名 (Field) | 数据类型 (Type) | 约束/描述 (Constraint/Description) |
| :--- | :--- | :--- |
| `reservation_id` | BIGINT | **主键 (PK)**, 自动递增 |
| `lab_id` | INT | **外键 (FK)**, 关联 `LabRoom` 表 (预约的实验室) |
| `user_id` | INT | **外键 (FK)**, 关联 `User` 表 (预约人) |
| `stort_time` | DATETIME | 预约开始时间 (精确到时分) |
| `end_time` | DATETIME | 预约结束时间 |
| `purpose` | VARCHAR(255) | 预约目的 |
| `check_in_time` | DATETIME | 到达签到时间 (实验室进出记录) |
| `check_out_time` | DATETIME | 离开签到时间 (实验室进出记录) |
| `status` | ENUM | 预约状态：'Approved', 'Pending', 'Cancelled', 'Completed' |